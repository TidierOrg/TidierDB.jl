
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="TidierDB.jl">
      
      
        <meta name="author" content="Lazaro Alonso and Karandeep Singh">
      
      
      
        <link rel="prev" href="../examples/generated/UserGuide/misc_tips/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>References/Docstrings - TidierDB.jl</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Lato";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
      <link rel="stylesheet" href="../assets/Documenter.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#index" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="TidierDB.jl" class="md-header__button md-logo" aria-label="TidierDB.jl" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TidierDB.jl
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              References/Docstrings
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/TidierOrg/TidierDB.jl" title="source.link.title" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    TidierDB.jl
  </div>
</a>


      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="TidierDB.jl" class="md-nav__button md-logo" aria-label="TidierDB.jl" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    TidierDB.jl
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/TidierOrg/TidierDB.jl" title="source.link.title" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    TidierDB.jl
  </div>
</a>


    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/key_differences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Key Differences from TidierData.jl
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/file_reading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File Reading
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/ex_joining/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Joining Tables
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/agg_window/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aggregate and Window Functions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/udfs_ex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flexible Syntax and UDFs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/from_queryex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reusing a Query (and Views)
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/dates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dates
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/unnesting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unnesting Columns
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/s3viaduckdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S3 + DuckDB + TidierDB
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/athena/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Athena
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/Snowflake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Snowflake
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/databricks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Databricks
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/functions_pass_to_DB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Functions with TidierDB Chains
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/outofmemex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working With Larger than RAM Datasets
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/ibis_comp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TidierDB.jl vs Ibis
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/duckplyr_reprex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reproduce a duckplyr example
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/generated/UserGuide/misc_tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Misc Tips/Tricks
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    References/Docstrings
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    References/Docstrings
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      Index
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-exported-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Reference - Exported functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-internal-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Reference - Internal functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      Index
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-exported-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Reference - Exported functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-internal-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Reference - Internal functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>References/Docstrings</h1>

<p><a id='Index'></a></p>
<p><a id='Index-1'></a></p>
<h2 id="index">Index<a class="headerlink" href="#index" title="Permanent link">¤</a></h2>
<ul>
<li><a href="./#TidierDB.aggregate_and_window_functions-Tuple{}"><code>TidierDB.aggregate_and_window_functions</code></a></li>
<li><a href="./#TidierDB.connect-Tuple{duckdb}"><code>TidierDB.connect</code></a></li>
<li><a href="./#TidierDB.copy_to-Tuple{Any, Union{AbstractString, DataFrame}, String}"><code>TidierDB.copy_to</code></a></li>
<li><a href="./#TidierDB.db_table"><code>TidierDB.db_table</code></a></li>
<li><a href="./#TidierDB.drop_view-Tuple{Any, Any}"><code>TidierDB.drop_view</code></a></li>
<li><a href="./#TidierDB.show_tables-Tuple{Union{DuckDB.Connection, DuckDB.DB}}"><code>TidierDB.show_tables</code></a></li>
<li><a href="./#TidierDB.warnings-Tuple{Bool}"><code>TidierDB.warnings</code></a></li>
<li><a href="./#TidierDB.write_file"><code>TidierDB.write_file</code></a></li>
<li><a href="./#TidierDB.@anti_join-Tuple{Any, Any, Vararg{Any}}"><code>TidierDB.@anti_join</code></a></li>
<li><a href="./#TidierDB.@arrange-Tuple{Any, Vararg{Any}}"><code>TidierDB.@arrange</code></a></li>
<li><a href="./#TidierDB.@collect"><code>TidierDB.@collect</code></a></li>
<li><a href="./#TidierDB.@count-Tuple{Any, Vararg{Any}}"><code>TidierDB.@count</code></a></li>
<li><a href="./#TidierDB.@create_view"><code>TidierDB.@create_view</code></a></li>
<li><a href="./#TidierDB.@distinct-Tuple{Any, Vararg{Any}}"><code>TidierDB.@distinct</code></a></li>
<li><a href="./#TidierDB.@filter-Tuple{Any, Vararg{Any}}"><code>TidierDB.@filter</code></a></li>
<li><a href="./#TidierDB.@full_join-Tuple{Any, Any, Vararg{Any}}"><code>TidierDB.@full_join</code></a></li>
<li><a href="./#TidierDB.@group_by-Tuple{Any, Vararg{Any}}"><code>TidierDB.@group_by</code></a></li>
<li><a href="./#TidierDB.@head"><code>TidierDB.@head</code></a></li>
<li><a href="./#TidierDB.@inner_join-Tuple{Any, Any, Vararg{Any}}"><code>TidierDB.@inner_join</code></a></li>
<li><a href="./#TidierDB.@intersect-Tuple{Any, Any, Vararg{Any}}"><code>TidierDB.@intersect</code></a></li>
<li><a href="./#TidierDB.@left_join-Tuple{Any, Any, Vararg{Any}}"><code>TidierDB.@left_join</code></a></li>
<li><a href="./#TidierDB.@mutate-Tuple{Any, Vararg{Any}}"><code>TidierDB.@mutate</code></a></li>
<li><a href="./#TidierDB.@relocate-Tuple{Any, Vararg{Any}}"><code>TidierDB.@relocate</code></a></li>
<li><a href="./#TidierDB.@rename-Tuple{Any, Vararg{Any}}"><code>TidierDB.@rename</code></a></li>
<li><a href="./#TidierDB.@right_join-Tuple{Any, Any, Vararg{Any}}"><code>TidierDB.@right_join</code></a></li>
<li><a href="./#TidierDB.@select-Tuple{Any, Vararg{Any}}"><code>TidierDB.@select</code></a></li>
<li><a href="./#TidierDB.@semi_join-Tuple{Any, Any, Vararg{Any}}"><code>TidierDB.@semi_join</code></a></li>
<li><a href="./#TidierDB.@separate-NTuple{4, Any}"><code>TidierDB.@separate</code></a></li>
<li><a href="./#TidierDB.@setdiff-Tuple{Any, Any, Vararg{Any}}"><code>TidierDB.@setdiff</code></a></li>
<li><a href="./#TidierDB.@slice_max"><code>TidierDB.@slice_max</code></a></li>
<li><a href="./#TidierDB.@slice_min"><code>TidierDB.@slice_min</code></a></li>
<li><a href="./#TidierDB.@slice_sample"><code>TidierDB.@slice_sample</code></a></li>
<li><a href="./#TidierDB.@summarise-Tuple{Any, Vararg{Any}}"><code>TidierDB.@summarise</code></a></li>
<li><a href="./#TidierDB.@summarize-Tuple{Any, Vararg{Any}}"><code>TidierDB.@summarize</code></a></li>
<li><a href="./#TidierDB.@transmute-Tuple{Any, Vararg{Any}}"><code>TidierDB.@transmute</code></a></li>
<li><a href="./#TidierDB.@union-Tuple{Any, Any, Vararg{Any}}"><code>TidierDB.@union</code></a></li>
<li><a href="./#TidierDB.@union_all-Tuple{Any, Any}"><code>TidierDB.@union_all</code></a></li>
<li><a href="./#TidierDB.@unite-Tuple{Any, Any, Any, Any, Vararg{Any}}"><code>TidierDB.@unite</code></a></li>
<li><a href="./#TidierDB.@unnest_longer-Tuple{Any, Vararg{Any}}"><code>TidierDB.@unnest_longer</code></a></li>
<li><a href="./#TidierDB.@unnest_wider-Tuple{Any, Vararg{Any}}"><code>TidierDB.@unnest_wider</code></a></li>
<li><a href="./#TidierDB.@window_frame-Tuple{Any, Vararg{Any}}"><code>TidierDB.@window_frame</code></a></li>
<li><a href="./#TidierDB.@window_order-Tuple{Any, Vararg{Any}}"><code>TidierDB.@window_order</code></a></li>
</ul>
<p><a id='Reference-Exported-functions'></a></p>
<p><a id='Reference-Exported-functions-1'></a></p>
<h2 id="reference-exported-functions">Reference - Exported functions<a class="headerlink" href="#reference-exported-functions" title="Permanent link">¤</a></h2>
<p><a id='TidierDB.connect-Tuple{duckdb}' href='#TidierDB.connect-Tuple{duckdb}'>#</a>
<strong><code>TidierDB.connect</code></strong> &mdash; <em>Method</em>.</p>
<div class="highlight"><pre><span></span><code><span class="n">connect</span><span class="p">(</span><span class="n">backend</span><span class="p">;</span><span class="w"> </span><span class="n">kwargs</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>This function establishes a database connection based on the specified backend and connection parameters and sets the SQL mode</p>
<p><strong>Arguments</strong></p>
<ul>
<li>
<p><code>backend</code>: type specifying the database backend to connect to. Supported backends are:</p>
<ul>
<li><code>duckdb()</code>, <code>sqlite()</code>(SQLite), <code>mssql()</code>, <code>mysql()</code>(for MariaDB and MySQL), <code>clickhouse()</code>, <code>postgres()</code></li>
<li><code>kwargs</code>: Keyword arguments specifying the connection parameters for the selected backend. The required parameters vary depending on the backend:</li>
</ul>
</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>A database connection object based on the selected backend.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="go"># Connect to MySQL</span>
<span class="go"># conn = connect(mysql(); host=&quot;localhost&quot;, user=&quot;root&quot;, password=&quot;password&quot;, db=&quot;mydb&quot;)</span>
<span class="go"># Connect to PostgreSQL using LibPQ</span>
<span class="go"># conn = connect(postgres(); host=&quot;localhost&quot;, dbname=&quot;mydb&quot;, user=&quot;postgres&quot;, password=&quot;password&quot;)</span>
<span class="go"># Connect to ClickHouse</span>
<span class="go"># conn = connect(clickhouse(); host=&quot;localhost&quot;, port=9000, database=&quot;mydb&quot;, user=&quot;default&quot;, password=&quot;&quot;)</span>
<span class="go"># Connect to SQLite</span>
<span class="go"># conn = connect(sqlite())</span>
<span class="go"># Connect to Google Big Query</span>
<span class="go"># conn = connect(gbq(), &quot;json_user_key_path&quot;, &quot;location&quot;)</span>
<span class="go"># Connect to Snowflake</span>
<span class="go"># conn = connect(snowflake(), &quot;ac_id&quot;, &quot;token&quot;, &quot;Database_name&quot;, &quot;Schema_name&quot;, &quot;warehouse_name&quot;)</span>
<span class="go"># Connect to Microsoft SQL Server</span>
<span class="go"># conn = connect(mssql(), &quot;DRIVER={ODBC Driver 18 for SQL Server};SERVER=host,1433;UID=sa;PWD=YourPassword;Encrypt=no;TrustServerCertificate=yes&quot;)</span>
<span class="go"># Connect to DuckDB</span>
<span class="go"># connect to Google Cloud via DuckDB</span>
<span class="go"># google_db = connect(duckdb(), :gbq, access_key=&quot;string&quot;, secret_key=&quot;string&quot;)</span>
<span class="go"># Connect to AWS via DuckDB</span>
<span class="go"># aws_db = connect2(duckdb(), :aws, aws_access_key_id=get(ENV, &quot;AWS_ACCESS_KEY_ID&quot;, &quot;access_key&quot;), aws_secret_access_key=get(ENV, &quot;AWS_SECRET_ACCESS_KEY&quot;, &quot;secret_access key&quot;), aws_region=get(ENV, &quot;AWS_DEFAULT_REGION&quot;, &quot;us-east-1&quot;))</span>
<span class="go"># Connect to MotherDuck</span>
<span class="go"># connect(duckdb(), &quot;&quot;md://...&quot;&quot;) for first connection, vs connect(duckdb(), &quot;md:&quot;) for reconnection</span>
<span class="go"># Connect to exisiting database file</span>
<span class="go"># connect(duckdb(), &quot;path/to/database.duckdb&quot;)</span>
<span class="go"># Open an in-memory database</span>
<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">())</span>
<span class="go">DuckDB.DB(&quot;:memory:&quot;)</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB.jl#L352-L394' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.copy_to-Tuple{Any, Union{AbstractString, DataFrame}, String}' href='#TidierDB.copy_to-Tuple{Any, Union{AbstractString, DataFrame}, String}'>#</a>
<strong><code>TidierDB.copy_to</code></strong> &mdash; <em>Method</em>.</p>
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="n">copy_to</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="n">df_or_path</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Allows user to copy a df to the database connection. Currently supports DuckDB, SQLite, MySql</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>conn</code>: the database connection</li>
<li><code>df</code>: dataframe to be copied or path to serve as source. With DuckDB, path supports .csv, .json, .parquet</li>
<li><code>name</code>: name as string for the database to be used</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">copy_to</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">);</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB.jl#L300-L319' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.db_table' href='#TidierDB.db_table'>#</a>
<strong><code>TidierDB.db_table</code></strong> &mdash; <em>Function</em>.</p>
<div class="highlight"><pre><span></span><code><span class="n">db_table</span><span class="p">(</span><span class="n">database</span><span class="p">,</span><span class="w"> </span><span class="n">table_name</span><span class="p">,</span><span class="w"> </span><span class="n">athena_params</span><span class="p">,</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">iceberg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">df_name</span><span class="p">)</span>
<span class="n">dt</span><span class="p">(</span><span class="n">database</span><span class="p">,</span><span class="w"> </span><span class="n">table_name</span><span class="p">,</span><span class="w"> </span><span class="n">athena_params</span><span class="p">,</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">iceberg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">df_name</span><span class="p">)</span>
</code></pre></div>
<p><code>db_table</code> starts the underlying SQL query struct, adding the metadata and table. If paths are passed directly to <code>db_table</code> instead of a  name it will not copy it to memory, but rather read directly from the file. <code>db_table</code>  only supports direct file paths to a table. DataFrames  are read as a view. It does not support database file paths such as  <code>dbname.duckdb</code>  or  <code>dbname.sqlite</code>. Database files must be used with <code>connect(db, "path_to_db.duckdb")</code> first  to allow <code>db_table</code> to read the db tables.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>database</code>: The Database or connection object</li>
<li>
<p><code>table_name</code>: tablename as a string (dataframe, name, local path, or URL).     - CSV/TSV       - Parquet     - Json      - Iceberg     - Delta     - S3 tables from AWS or Google Cloud      - Google Sheets spreadsheet link</p>
<ul>
<li>DuckDB and ClickHouse support vectors of paths and URLs.</li>
<li>
<p>DuckDB and ClickHouse also support use of <code>*</code> wildcards to read all files of a type in a location such as:</p>
<ul>
<li><code>db_table(db, "Path/to/testing_files/*.parquet")</code><ul>
<li>Use any DuckDB reader "read<em>csv('file</em>path', additional arguments allowed)" .</li>
</ul>
</li>
<li><code>delta</code>: must be true to read delta files</li>
<li><code>iceberg</code>: must be true to read iceberg finalize_ctes</li>
<li><code>alias</code>: optional argument when using a <code>*</code> wildcard in a file path, that allows user to determine an alias for the data being read in. If empty, it will refer to table as <code>data</code>.</li>
<li><code>df_name</code> when using a DataFrame as the second argument, a third string argument must be supplied to become the name of the view.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_mem&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db_table</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;main.df_mem&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_mem&quot;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;my_table&quot;</span><span class="p">);</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB.jl#L152-L195' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.drop_view-Tuple{Any, Any}' href='#TidierDB.drop_view-Tuple{Any, Any}'>#</a>
<strong><code>TidierDB.drop_view</code></strong> &mdash; <em>Method</em>.</p>
<div class="highlight"><pre><span></span><code><span class="n">drop_view</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
<p>Drop a view. Currently supports DuckDB, MySQL, GBQ, Postgres</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query to create a view from.</li>
<li><code>name</code>: The name of the view to drop.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df1&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@create_view</span><span class="p">(</span><span class="n">viewer</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">drop_view</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;viewer&quot;</span><span class="p">);</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/view_compute.jl#L37-L56' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.show_tables-Tuple{Union{DuckDB.Connection, DuckDB.DB}}' href='#TidierDB.show_tables-Tuple{Union{DuckDB.Connection, DuckDB.DB}}'>#</a>
<strong><code>TidierDB.show_tables</code></strong> &mdash; <em>Method</em>.</p>
<div class="highlight"><pre><span></span><code><span class="n">show_tables</span><span class="p">(</span><span class="n">con</span><span class="p">;</span><span class="w"> </span><span class="n">GBQ_datasetname</span><span class="p">)</span>
</code></pre></div>
<p>Shows tables available in database. currently supports DuckDB, databricks, Snowflake, GBQ, SQLite, LibPQ</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>con</code> : connection to backend</li>
<li><code>GBQ_datasetname</code> : string of dataset name</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">show_tables</span><span class="p">(</span><span class="n">db</span><span class="p">);</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L582-L596' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.warnings-Tuple{Bool}' href='#TidierDB.warnings-Tuple{Bool}'>#</a>
<strong><code>TidierDB.warnings</code></strong> &mdash; <em>Method</em>.</p>
<div class="highlight"><pre><span></span><code><span class="n">warnings</span><span class="p">(</span><span class="n">show</span><span class="o">::</span><span class="kt">Bool</span><span class="p">)</span>
</code></pre></div>
<p>Sets the global warning flag to the specified boolean value.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>flag::Bool</code>: A boolean value to set the warning flag. If <code>true</code>, warnings will be enabled; if <code>false</code>, warnings will be disabled.</li>
</ul>
<p><strong>Default Behavior</strong></p>
<p>By default, the warning flag is set to <code>false</code>, meaning that warnings are disabled unless explicitly enabled by setting this function with <code>true</code>.</p>
<p><strong>Example</strong></p>
<div class="highlight"><pre><span></span><code>julia&gt; warnings(true);
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB.jl#L107-L122' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.write_file' href='#TidierDB.write_file'>#</a>
<strong><code>TidierDB.write_file</code></strong> &mdash; <em>Function</em>.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="n">write_file</span><span class="p">(</span><span class="n">sql_query</span><span class="o">::</span><span class="kt">SQLQuery</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
<p>Write a local file to from sql_query. Only supports DuckDB at this time.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query</li>
<li><code>path</code>: file path with file type suffix ie "path.csv", "path.parquet", etc</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;1-1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2-2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3-3-3&quot;</span><span class="p">]);</span><span class="w"> </span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@filter</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;2-2&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">write_file</span><span class="p">(</span><span class="s">&quot;test.parquet&quot;</span><span class="p">)</span>
<span class="go">(Count = [1],)</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/view_compute.jl#L75-L93' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@anti_join-Tuple{Any, Any, Vararg{Any}}' href='#TidierDB.@anti_join-Tuple{Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@anti_join</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@anti_join</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">join_table</span><span class="p">,</span><span class="w"> </span><span class="n">orignal_table_col</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">new_table_col</span><span class="p">)</span>
</code></pre></div>
<p>Perform an anti join between two SQL queries based on a specified condition.  Joins can be equi joins or inequality joins. For equi joins, the joining table  key column is dropped. Inequality joins can be made into AsOf or rolling joins  by wrapping the inequality in closest(key &gt;= key2). With inequality joins, the  columns from both tables are kept. Multiple joining criteria can be added, but  need to be separated by commas, ie <code>closest(key &gt;= key2), key3 == key3</code></p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The primary SQL query to operate on.</li>
<li><code>join_table::{SQLQuery, String}</code>: The secondary SQL table to join with the primary query table. Table that exist on the database already should be written as a string of the name</li>
<li><code>orignal_table_col</code>: Column from the original table that matches for join.  Accepts cols as bare column names or strings</li>
<li><code>new_table_col</code>: Column from the new table that matches for join.  Accepts cols as bare column names or strings</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;AA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AC&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AG&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AI&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AK&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AM&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">92</span><span class="p">,</span><span class="w"> </span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">dfj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_join&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="nd">@anti_join</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">dfj</span><span class="p">),</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id2</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">5×4 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent </span>
<span class="go">     │ String  String  Int64  Float64 </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ AB      aa          2      0.2</span>
<span class="go">   2 │ AD      aa          4      0.4</span>
<span class="go">   3 │ AF      aa          1      0.6</span>
<span class="go">   4 │ AH      aa          3      0.8</span>
<span class="go">   5 │ AJ      aa          5      1.0</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/joins_sq.jl#L523-L568' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@arrange-Tuple{Any, Vararg{Any}}' href='#TidierDB.@arrange-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@arrange</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@arrange</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Order SQL table rows based on specified column(s). Of note, <code>@arrange</code> should not be used when performing ordered window functions,  <code>@window_order</code>, or preferably the <code>_order</code> argument in <code>@mutate</code> should be used instead</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The SQL query to arrange</li>
<li><code>columns</code>: Columns to order the rows by. Can include multiple columns for nested sorting. Wrap column name with <code>desc()</code> for descending order.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">desc</span><span class="p">(</span><span class="n">percent</span><span class="p">))</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×4 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent </span>
<span class="go">     │ String  String  Int64  Float64 </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ AF      aa          1      0.6</span>
<span class="go">   2 │ AA      bb          1      0.1</span>
<span class="go">   3 │ AG      bb          2      0.7</span>
<span class="go">   4 │ AB      aa          2      0.2</span>
<span class="go">   5 │ AH      aa          3      0.8</span>
<span class="go">   6 │ AC      bb          3      0.3</span>
<span class="go">   7 │ AI      bb          4      0.9</span>
<span class="go">   8 │ AD      aa          4      0.4</span>
<span class="go">   9 │ AJ      aa          5      1.0</span>
<span class="go">  10 │ AE      bb          5      0.5</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">desc</span><span class="p">(</span><span class="n">df_view</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×4 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent </span>
<span class="go">     │ String  String  Int64  Float64 </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ AE      bb          5      0.5</span>
<span class="go">   2 │ AJ      aa          5      1.0</span>
<span class="go">   3 │ AD      aa          4      0.4</span>
<span class="go">   4 │ AI      bb          4      0.9</span>
<span class="go">   5 │ AC      bb          3      0.3</span>
<span class="go">   6 │ AH      aa          3      0.8</span>
<span class="go">   7 │ AB      aa          2      0.2</span>
<span class="go">   8 │ AG      bb          2      0.7</span>
<span class="go">   9 │ AA      bb          1      0.1</span>
<span class="go">  10 │ AF      aa          1      0.6</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L164-L221' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@collect' href='#TidierDB.@collect'>#</a>
<strong><code>TidierDB.@collect</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@collect</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
</code></pre></div>
<p><code>db_table</code> starts the underlying SQL query struct, adding the metadata and table. </p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query to operate on.</li>
<li><code>stream</code>: optional streaming for query/execution of results when using DuckDB. Defaults to false</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">julia</span><span class="o">&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="n">julia</span><span class="o">&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>


<span class="n">julia</span><span class="o">&gt;</span><span class="w"> </span><span class="nd">@collect</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_mem&quot;</span><span class="p">)</span>
<span class="mi">10</span><span class="o">×</span><span class="mi">4</span><span class="w"> </span><span class="n">DataFrame</span>
<span class="w"> </span><span class="n">Row</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="n">groups</span><span class="w">  </span><span class="n">value</span><span class="w">  </span><span class="n">percent</span><span class="w"> </span>
<span class="w">     </span><span class="n">│</span><span class="w"> </span><span class="kt">String</span><span class="w">  </span><span class="kt">String</span><span class="w">  </span><span class="kt">Int64</span><span class="w">  </span><span class="kt">Float64</span><span class="w"> </span>
<span class="n">─────┼────────────────────────────────</span>
<span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AA</span><span class="w">      </span><span class="n">bb</span><span class="w">          </span><span class="mi">1</span><span class="w">      </span><span class="mf">0.1</span>
<span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AB</span><span class="w">      </span><span class="n">aa</span><span class="w">          </span><span class="mi">2</span><span class="w">      </span><span class="mf">0.2</span>
<span class="w">   </span><span class="mi">3</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AC</span><span class="w">      </span><span class="n">bb</span><span class="w">          </span><span class="mi">3</span><span class="w">      </span><span class="mf">0.3</span>
<span class="w">   </span><span class="mi">4</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AD</span><span class="w">      </span><span class="n">aa</span><span class="w">          </span><span class="mi">4</span><span class="w">      </span><span class="mf">0.4</span>
<span class="w">   </span><span class="mi">5</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AE</span><span class="w">      </span><span class="n">bb</span><span class="w">          </span><span class="mi">5</span><span class="w">      </span><span class="mf">0.5</span>
<span class="w">   </span><span class="mi">6</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AF</span><span class="w">      </span><span class="n">aa</span><span class="w">          </span><span class="mi">1</span><span class="w">      </span><span class="mf">0.6</span>
<span class="w">   </span><span class="mi">7</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AG</span><span class="w">      </span><span class="n">bb</span><span class="w">          </span><span class="mi">2</span><span class="w">      </span><span class="mf">0.7</span>
<span class="w">   </span><span class="mi">8</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AH</span><span class="w">      </span><span class="n">aa</span><span class="w">          </span><span class="mi">3</span><span class="w">      </span><span class="mf">0.8</span>
<span class="w">   </span><span class="mi">9</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AI</span><span class="w">      </span><span class="n">bb</span><span class="w">          </span><span class="mi">4</span><span class="w">      </span><span class="mf">0.9</span>
<span class="w">  </span><span class="mi">10</span><span class="w"> </span><span class="n">│</span><span class="w"> </span><span class="n">AJ</span><span class="w">      </span><span class="n">aa</span><span class="w">          </span><span class="mi">5</span><span class="w">      </span><span class="mf">1.0</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L522-L556' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@count-Tuple{Any, Vararg{Any}}' href='#TidierDB.@count-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@count</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@count</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Count the number of rows grouped by specified column(s).</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The SQL query to operate on.</li>
<li><code>columns</code>: Columns to group by before counting. If no columns are specified, counts all rows in the query.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@count</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×2 DataFrame</span>
<span class="go"> Row │ groups  count </span>
<span class="go">     │ String  Int64 </span>
<span class="go">─────┼───────────────</span>
<span class="go">   1 │ aa          5</span>
<span class="go">   2 │ bb          5</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L275-L305' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@create_view' href='#TidierDB.@create_view'>#</a>
<strong><code>TidierDB.@create_view</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@create_view</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span>
</code></pre></div>
<p>Create a view from a SQL query. Currently supports DuckDB, MySQL, GBQ, Postgres</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query to create a view from.</li>
<li><code>name</code>: The name of the view to create.</li>
<li><code>replace</code>: Boolean value that defaults to false so as not to replace exisiting views</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df1&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@create_view</span><span class="p">(</span><span class="n">viewer</span><span class="p">);</span><span class="w"> </span><span class="c"># will not overwrite existing view</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;viewer&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df1&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@create_view</span><span class="p">(</span><span class="n">viewer</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"> </span><span class="c"># will overwrite exisiting view</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/view_compute.jl#L10-L32' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@distinct-Tuple{Any, Vararg{Any}}' href='#TidierDB.@distinct-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@distinct</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@distinct</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Select distinct rows based on specified column(s). Distinct works differently in TidierData vs SQL and therefore TidierDB. Distinct will also select only the only columns it is given (or all if given none)</p>
<p><strong>Arguments</strong></p>
<p><code>sql_query::SQLQuery</code>: The SQL query to operate on. <code>columns</code>: Columns to determine uniqueness. If no columns are specified, all columns are used to identify distinct rows.</p>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@distinct</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">5×1 DataFrame</span>
<span class="go"> Row │ value </span>
<span class="go">     │ Int64 </span>
<span class="go">─────┼───────</span>
<span class="go">   1 │     1</span>
<span class="go">   2 │     2</span>
<span class="go">   3 │     3</span>
<span class="go">   4 │     4</span>
<span class="go">   5 │     5</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@distinct</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×4 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent </span>
<span class="go">     │ String  String  Int64  Float64 </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1      0.1</span>
<span class="go">   2 │ AB      aa          2      0.2</span>
<span class="go">   3 │ AC      bb          3      0.3</span>
<span class="go">   4 │ AD      aa          4      0.4</span>
<span class="go">   5 │ AE      bb          5      0.5</span>
<span class="go">   6 │ AF      aa          1      0.6</span>
<span class="go">   7 │ AG      bb          2      0.7</span>
<span class="go">   8 │ AH      aa          3      0.8</span>
<span class="go">   9 │ AI      bb          4      0.9</span>
<span class="go">  10 │ AJ      aa          5      1.0</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L237-L292' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@filter-Tuple{Any, Vararg{Any}}' href='#TidierDB.@filter-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@filter</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@filter</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">conditions</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Filter rows in a SQL table based on specified conditions.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The SQL query to filter rows from.</li>
<li><code>conditions</code>: Expressions specifying the conditions that rows must satisfy to be included in the output.                   Rows for which the expression evaluates to <code>true</code> will be included in the result.                   Multiple conditions can be combined using logical operators (<code>&amp;&amp;</code>, <code>||</code>). <code>@filter</code> will automatically                   detect whether the conditions belong in WHERE vs HAVING.</li>
</ul>
<p>Temporarily, it is best to use begin and end when filtering multiple conditions. (ex 2 below)</p>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@filter</span><span class="p">(</span><span class="n">percent</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">.5</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">5×4 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent </span>
<span class="go">     │ String  String  Int64  Float64 </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ AF      aa          1      0.6</span>
<span class="go">   2 │ AG      bb          2      0.7</span>
<span class="go">   3 │ AH      aa          3      0.8</span>
<span class="go">   4 │ AI      bb          4      0.9</span>
<span class="go">   5 │ AJ      aa          5      1.0</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@summarise</span><span class="p">(</span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">percent</span><span class="p">))</span>
<span class="w">         </span><span class="nd">@filter</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span>
<span class="w">           </span><span class="n">groups</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="c"># logical operators can still be used like this</span>
<span class="w">           </span><span class="n">mean</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">.5</span>
<span class="w">         </span><span class="k">end</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×2 DataFrame</span>
<span class="go"> Row │ groups  mean    </span>
<span class="go">     │ String  Float64 </span>
<span class="go">─────┼─────────────────</span>
<span class="go">   1 │ aa          0.6</span>
<span class="go">   2 │ bb          0.5</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@summarize</span><span class="p">(</span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">value</span><span class="p">));</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@eval</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@filter</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">$</span><span class="n">q</span><span class="p">)</span><span class="w"> </span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">4×4 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent </span>
<span class="go">     │ String  String  Int64  Float64 </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1      0.1</span>
<span class="go">   2 │ AB      aa          2      0.2</span>
<span class="go">   3 │ AF      aa          1      0.6</span>
<span class="go">   4 │ AG      bb          2      0.7</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L42-L111' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@full_join-Tuple{Any, Any, Vararg{Any}}' href='#TidierDB.@full_join-Tuple{Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@full_join</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@inner_join</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">join_table</span><span class="p">,</span><span class="w"> </span><span class="n">orignal_table_col</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">new_table_col</span><span class="p">)</span>
</code></pre></div>
<p>Perform an full join between two SQL queries based on a specified condition.  Joins can be equi joins or inequality joins. For equi joins, the joining table  key column is dropped. Inequality joins can be made into AsOf or rolling joins  by wrapping the inequality in closest(key &gt;= key2). With inequality joins, the  columns from both tables are kept. Multiple joining criteria can be added, but  need to be separated by commas, ie <code>closest(key &gt;= key2), key3 == key3</code></p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The primary SQL query to operate on.</li>
<li><code>join_table::{SQLQuery, String}</code>: The secondary SQL table to join with the primary query table. Table that exist on the database already should be written as a string of the name</li>
<li><code>orignal_table_col</code>: Column from the original table that matches for join.  Accepts cols as bare column names or strings</li>
<li><code>new_table_col</code>: Column from the new table that matches for join.  Accepts cols as bare column names or strings</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;AA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AC&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AG&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AI&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AK&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AM&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">92</span><span class="p">,</span><span class="w"> </span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">dfj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_join&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@full_join</span><span class="p">((</span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_join&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@filter</span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">70</span><span class="p">)),</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">11×6 DataFrame</span>
<span class="go"> Row │ id      groups   value    percent    category  score   </span>
<span class="go">     │ String  String?  Int64?   Float64?   String?   Int64?  </span>
<span class="go">─────┼────────────────────────────────────────────────────────</span>
<span class="go">   1 │ AA      bb             1        0.1  X              88</span>
<span class="go">   2 │ AC      bb             3        0.3  Y              92</span>
<span class="go">   3 │ AE      bb             5        0.5  X              77</span>
<span class="go">   4 │ AG      bb             2        0.7  Y              83</span>
<span class="go">   5 │ AI      bb             4        0.9  X              95</span>
<span class="go">   6 │ AB      aa             2        0.2  missing   missing </span>
<span class="go">   7 │ AD      aa             4        0.4  missing   missing </span>
<span class="go">   8 │ AF      aa             1        0.6  missing   missing </span>
<span class="go">   9 │ AH      aa             3        0.8  missing   missing </span>
<span class="go">  10 │ AJ      aa             5        1.0  missing   missing </span>
<span class="go">  11 │ AM      missing  missing  missing    X              74</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/joins_sq.jl#L442-L493' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@group_by-Tuple{Any, Vararg{Any}}' href='#TidierDB.@group_by-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@group_by</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@group_by</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Group SQL table rows by specified column(s). If grouping is performed as a terminal operation without a  subsequent mutatation or summarization (as in the example below), then the resulting data frame will only  contains those groups. Collecting following a grouping will not return a grouped dataframe as TidierData does. </p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query to operate on.</li>
<li><code>exprs</code>: Expressions specifying the columns to group by. Columns can be specified by name.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×1 DataFrame</span>
<span class="go"> Row │ groups </span>
<span class="go">     │ String </span>
<span class="go">─────┼────────</span>
<span class="go">   1 │ aa</span>
<span class="go">   2 │ bb</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L197-L230' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@head' href='#TidierDB.@head'>#</a>
<strong><code>TidierDB.@head</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@head</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<p>Limit SQL table number of rows returned based on specified value.  <code>LIMIT</code> in SQL</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query to operate on.</li>
<li><code>value</code>: Number to limit how many rows are returned. If left empty, it will default to 6 rows</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="nd">@head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c">## supports expressions ie `3-2` would return the same df below</span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">1×4 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent </span>
<span class="go">     │ String  String  Int64  Float64 </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1      0.1</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L565-L595' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@inner_join-Tuple{Any, Any, Vararg{Any}}' href='#TidierDB.@inner_join-Tuple{Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@inner_join</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@inner_join</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">join_table</span><span class="p">,</span><span class="w"> </span><span class="n">orignal_table_col</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">new_table_col</span><span class="p">)</span>
</code></pre></div>
<p>Perform an inner join between two SQL queries based on a specified condition.  Joins can be equi joins or inequality joins. For equi joins, the joining table  key column is dropped. Inequality joins can be made into AsOf or rolling joins  by wrapping the inequality in closest(key &gt;= key2). With inequality joins, the  columns from both tables are kept. Multiple joining criteria can be added, but  need to be separated by commas, ie <code>closest(key &gt;= key2), key3 == key3</code></p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The primary SQL query to operate on.</li>
<li><code>join_table::{SQLQuery, String}</code>: The secondary SQL table to join with the primary query table. Table that exist on the database already should be written as a string of the name</li>
<li><code>orignal_table_col</code>: Column from the original table that matches for join.  Accepts cols as bare column names or strings</li>
<li><code>new_table_col</code>: Column from the new table that matches for join.  Accepts columns as bare column names or strings</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;AA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AC&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AG&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AI&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AK&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AM&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">92</span><span class="p">,</span><span class="w"> </span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">dfj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_join&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@inner_join</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">dfj</span><span class="p">),</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">5×6 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  category  score </span>
<span class="go">     │ String  String  Int64  Float64  String    Int64 </span>
<span class="go">─────┼─────────────────────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1      0.1  X            88</span>
<span class="go">   2 │ AC      bb          3      0.3  Y            92</span>
<span class="go">   3 │ AE      bb          5      0.5  X            77</span>
<span class="go">   4 │ AG      bb          2      0.7  Y            83</span>
<span class="go">   5 │ AI      bb          4      0.9  X            95</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/joins_sq.jl#L401-L446' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@intersect-Tuple{Any, Any, Vararg{Any}}' href='#TidierDB.@intersect-Tuple{Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@intersect</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@intersect</span><span class="p">(</span><span class="n">sql_query1</span><span class="p">,</span><span class="w"> </span><span class="n">sql_query2</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
</code></pre></div>
<p>Combine two SQL queries/tables using <code>INTERSECT</code></p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query1</code>: The first SQL query to combine.</li>
<li><code>sql_query2</code>: The second SQL query to combine.</li>
<li><code>all</code>: Defaults to false, when true it will return duplicates. <code>INTERSECT ALL</code></li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>A lazy query of all rows in the second query bound to the first</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">],</span>
<span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Charlie&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;David&quot;</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">],</span>
<span class="w">       </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Charlie&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Eve&quot;</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df1&quot;</span><span class="p">);</span><span class="w"> </span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df2&quot;</span><span class="p">);</span><span class="w"> </span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="nd">@intersect</span><span class="p">(</span><span class="n">df2_table</span><span class="p">)</span><span class="w"> </span><span class="nd">@collect</span>
<span class="go">2×2 DataFrame</span>
<span class="go"> Row │ id     name    </span>
<span class="go">     │ Int64  String  </span>
<span class="go">─────┼────────────────</span>
<span class="go">   1 │     2  Bob</span>
<span class="go">   2 │     3  Charlie</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="nd">@intersect</span><span class="p">(</span><span class="n">df2_table</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">desc</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span><span class="nd">@collect</span>
<span class="go">3×2 DataFrame</span>
<span class="go"> Row │ id     name    </span>
<span class="go">     │ Int64  String  </span>
<span class="go">─────┼────────────────</span>
<span class="go">   1 │     3  Charlie</span>
<span class="go">   2 │     2  Bob</span>
<span class="go">   3 │     2  Bob</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/union_intersect_setdiff.jl#L129-L173' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@left_join-Tuple{Any, Any, Vararg{Any}}' href='#TidierDB.@left_join-Tuple{Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@left_join</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@left_join</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">join_table</span><span class="p">,</span><span class="w"> </span><span class="n">orignal_table_col</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">new_table_col</span><span class="p">)</span>
</code></pre></div>
<p>Perform a left join between two SQL queries based on a specified condition.  Joins can be equi joins or inequality joins. For equi joins, the joining table  key column is dropped. Inequality joins can be made into AsOf or rolling joins  by wrapping the inequality in closest(key &gt;= key2). With inequality joins, the  columns from both tables are kept. Multiple joining criteria can be added, but  need to be separated by commas, ie <code>closest(key &gt;= key2), key3 == key3</code></p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The primary SQL query to operate on.</li>
<li><code>join_table::{SQLQuery, String}</code>: The secondary SQL table to join with the primary query table. Table that exist on the database already should be written as a string of the name</li>
<li><code>orignal_table_col</code>: Column from the original table that matches for join.  Accepts cols as bare column names or strings</li>
<li><code>new_table_col</code>: Column from the new table that matches for join.  Accepts cols as bare column names or strings</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;AA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AC&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AG&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AI&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AK&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AM&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">92</span><span class="p">,</span><span class="w"> </span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">dfm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_mem&quot;</span><span class="p">);</span><span class="w"> </span><span class="n">dfj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_join&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dfm</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@left_join</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">dfj</span><span class="p">),</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id2</span><span class="w"> </span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×6 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  category  score   </span>
<span class="go">     │ String  String  Int64  Float64  String?   Int64?  </span>
<span class="go">─────┼───────────────────────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1      0.1  X              88</span>
<span class="go">   2 │ AC      bb          3      0.3  Y              92</span>
<span class="go">   3 │ AE      bb          5      0.5  X              77</span>
<span class="go">   4 │ AG      bb          2      0.7  Y              83</span>
<span class="go">   5 │ AI      bb          4      0.9  X              95</span>
<span class="go">   6 │ AB      aa          2      0.2  missing   missing </span>
<span class="go">   7 │ AD      aa          4      0.4  missing   missing </span>
<span class="go">   8 │ AF      aa          1      0.6  missing   missing </span>
<span class="go">   9 │ AH      aa          3      0.8  missing   missing </span>
<span class="go">  10 │ AJ      aa          5      1.0  missing   missing </span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_join&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">                  </span><span class="nd">@filter</span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">85</span><span class="p">)</span><span class="w"> </span><span class="c"># only show scores above 85 in joining table</span>
<span class="w">                </span><span class="k">end</span><span class="p">;</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dfm</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@left_join</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">query</span><span class="p">),</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×6 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  category  score   </span>
<span class="go">     │ String  String  Int64  Float64  String?   Int64?  </span>
<span class="go">─────┼───────────────────────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1      0.1  X              88</span>
<span class="go">   2 │ AC      bb          3      0.3  Y              92</span>
<span class="go">   3 │ AI      bb          4      0.9  X              95</span>
<span class="go">   4 │ AB      aa          2      0.2  missing   missing </span>
<span class="go">   5 │ AD      aa          4      0.4  missing   missing </span>
<span class="go">   6 │ AE      bb          5      0.5  missing   missing </span>
<span class="go">   7 │ AF      aa          1      0.6  missing   missing </span>
<span class="go">   8 │ AG      bb          2      0.7  missing   missing </span>
<span class="go">   9 │ AH      aa          3      0.8  missing   missing </span>
<span class="go">  10 │ AJ      aa          5      1.0  missing   missing </span>

<span class="gp">julia&gt;</span><span class="w">  </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dfm</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">percent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@left_join</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">dfj</span><span class="p">),</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>


<span class="gp">julia&gt;</span><span class="w">  </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dfm</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">percent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">200</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@left_join</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">dfj</span><span class="p">),</span><span class="w"> </span><span class="n">closest</span><span class="p">(</span><span class="n">test</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">score</span><span class="p">))</span><span class="w"> </span><span class="c"># asof join</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/joins_sq.jl#L321-L406' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@mutate-Tuple{Any, Vararg{Any}}' href='#TidierDB.@mutate-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@mutate</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@mutate</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">exprs</span><span class="o">...</span><span class="p">;</span><span class="w"> </span><span class="n">_by</span><span class="p">,</span><span class="w"> </span><span class="n">_frame</span><span class="p">,</span><span class="w"> </span><span class="n">_order</span><span class="p">)</span>
</code></pre></div>
<p>Mutate SQL table by adding new columns or modifying existing ones.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The SQL query to operate on.</li>
<li><code>exprs</code>: Expressions for mutating the table. New columns can be added or existing columns modified using <code>column_name = expression syntax</code>, where expression can involve existing columns.</li>
<li><code>_by</code>: optional argument that supports single column names, or vectors of columns to allow for grouping for the transformation in the macro call</li>
<li><code>_frame</code>: optional argument that allows window frames to be determined within <code>@mutate</code>. supports single digits or tuples of numbers. supports <code>desc()</code> prefix</li>
<li><code>_order</code>: optional argument that allows window orders to be determined within <code>@mutate</code>. supports single columns or vectors of names</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">new_col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">percent</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×5 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  new_col </span>
<span class="go">     │ String  String  Int64  Float64  Float64 </span>
<span class="go">─────┼─────────────────────────────────────────</span>
<span class="go">   1 │ AA      bb          4      0.1     0.01</span>
<span class="go">   2 │ AB      aa          8      0.2     0.04</span>
<span class="go">   3 │ AC      bb         12      0.3     0.09</span>
<span class="go">   4 │ AD      aa         16      0.4     0.16</span>
<span class="go">   5 │ AE      bb         20      0.5     0.25</span>
<span class="go">   6 │ AF      aa          4      0.6     0.36</span>
<span class="go">   7 │ AG      bb          8      0.7     0.49</span>
<span class="go">   8 │ AH      aa         12      0.8     0.64</span>
<span class="go">   9 │ AI      bb         16      0.9     0.81</span>
<span class="go">  10 │ AJ      aa         20      1.0     1.0</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">maximum</span><span class="p">(</span><span class="n">percent</span><span class="p">),</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">percent</span><span class="p">),</span><span class="w"> </span><span class="n">_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×6 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  max      sum     </span>
<span class="go">     │ String  String  Int64  Float64  Float64  Float64 </span>
<span class="go">─────┼──────────────────────────────────────────────────</span>
<span class="go">   1 │ AB      aa          2      0.2      1.0      3.0</span>
<span class="go">   2 │ AD      aa          4      0.4      1.0      3.0</span>
<span class="go">   3 │ AF      aa          1      0.6      1.0      3.0</span>
<span class="go">   4 │ AH      aa          3      0.8      1.0      3.0</span>
<span class="go">   5 │ AJ      aa          5      1.0      1.0      3.0</span>
<span class="go">   6 │ AA      bb          1      0.1      0.9      2.5</span>
<span class="go">   7 │ AC      bb          3      0.3      0.9      2.5</span>
<span class="go">   8 │ AE      bb          5      0.5      0.9      2.5</span>
<span class="go">   9 │ AG      bb          2      0.7      0.9      2.5</span>
<span class="go">  10 │ AI      bb          4      0.9      0.9      2.5</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">          </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">value1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">value</span><span class="p">),</span><span class="w"> </span>
<span class="w">                      </span><span class="n">_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">percent</span><span class="p">,</span><span class="w"> </span>
<span class="w">                      </span><span class="n">_frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span>
<span class="w">                      </span><span class="n">_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groups</span><span class="p">)</span><span class="w"> </span>
<span class="w">          </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">value2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">value</span><span class="p">),</span><span class="w"> </span>
<span class="w">                      </span><span class="n">_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">desc</span><span class="p">(</span><span class="n">percent</span><span class="p">),</span>
<span class="w">                      </span><span class="n">_frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">  </span>
<span class="w">          </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">          </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×6 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  value1  value2  </span>
<span class="go">     │ String  String  Int64  Float64  Int128  Int128? </span>
<span class="go">─────┼─────────────────────────────────────────────────</span>
<span class="go">   1 │ AJ      aa          5      1.0       8       21</span>
<span class="go">   2 │ AH      aa          3      0.8       9       16</span>
<span class="go">   3 │ AF      aa          1      0.6       8       10</span>
<span class="go">   4 │ AD      aa          4      0.4       7        3</span>
<span class="go">   5 │ AB      aa          2      0.2       6  missing </span>
<span class="go">   6 │ AI      bb          4      0.9       6       18</span>
<span class="go">   7 │ AG      bb          2      0.7      11       15</span>
<span class="go">   8 │ AE      bb          5      0.5      10        6</span>
<span class="go">   9 │ AC      bb          3      0.3       9        1</span>
<span class="go">  10 │ AA      bb          1      0.1       4  missing </span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">across</span><span class="p">([</span><span class="ss">:value</span><span class="p">,</span><span class="w"> </span><span class="ss">:percent</span><span class="p">],</span><span class="w"> </span><span class="n">agg</span><span class="p">(</span><span class="n">kurtosis</span><span class="p">)))</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×6 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  value_kurtosis  percent_kurtosis </span>
<span class="go">     │ String  String  Int64  Float64  Float64         Float64          </span>
<span class="go">─────┼──────────────────────────────────────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1      0.1        -1.33393              -1.2</span>
<span class="go">   2 │ AB      aa          2      0.2        -1.33393              -1.2</span>
<span class="go">   3 │ AC      bb          3      0.3        -1.33393              -1.2</span>
<span class="go">   4 │ AD      aa          4      0.4        -1.33393              -1.2</span>
<span class="go">   5 │ AE      bb          5      0.5        -1.33393              -1.2</span>
<span class="go">   6 │ AF      aa          1      0.6        -1.33393              -1.2</span>
<span class="go">   7 │ AG      bb          2      0.7        -1.33393              -1.2</span>
<span class="go">   8 │ AH      aa          3      0.8        -1.33393              -1.2</span>
<span class="go">   9 │ AI      bb          4      0.9        -1.33393              -1.2</span>
<span class="go">  10 │ AJ      aa          5      1.0        -1.33393              -1.2</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">          </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">value2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">value</span><span class="p">),</span><span class="w"> </span>
<span class="w">                      </span><span class="n">_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">desc</span><span class="p">([</span><span class="ss">:value</span><span class="p">,</span><span class="w"> </span><span class="ss">:percent</span><span class="p">]),</span>
<span class="w">                      </span><span class="n">_frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w">  </span>
<span class="w">          </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/mutate_and_summ.jl#L111-L223' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@relocate-Tuple{Any, Vararg{Any}}' href='#TidierDB.@relocate-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@relocate</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@relocate</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="p">,</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">nothing</span><span class="p">,</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">nothing</span><span class="p">)</span>
</code></pre></div>
<p>Rearranges the columns in the queried table. This function allows for moving specified columns to a new position within the table, either before or after a given target column. The <code>columns</code>, <code>before</code>, and <code>after</code> arguments all accept tidy selection functions. Only one of <code>before</code> or <code>after</code> should be specified. If neither are specified, the selected columns will be moved to the beginning of the table.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query</li>
<li><code>columns</code>: Column or columns to to be moved.</li>
<li><code>before</code>: (Optional) Column or columns before which the specified columns will be moved. If not provided or <code>nothing</code>, this argument is ignored.</li>
<li><code>after</code>: (Optional) Column or columns after which the specified columns will be moved. If not provided or <code>nothing</code>, this argument is ignored.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@relocate</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">ends_with</span><span class="p">(</span><span class="s">&quot;d&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×4 DataFrame</span>
<span class="go"> Row │ percent  groups  value  id     </span>
<span class="go">     │ Float64  String  Int64  String </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │     0.1  bb          1  AA</span>
<span class="go">   2 │     0.2  aa          2  AB</span>
<span class="go">   3 │     0.3  bb          3  AC</span>
<span class="go">   4 │     0.4  aa          4  AD</span>
<span class="go">   5 │     0.5  bb          5  AE</span>
<span class="go">   6 │     0.6  aa          1  AF</span>
<span class="go">   7 │     0.7  bb          2  AG</span>
<span class="go">   8 │     0.8  aa          3  AH</span>
<span class="go">   9 │     0.9  bb          4  AI</span>
<span class="go">  10 │     1.0  aa          5  AJ</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@relocate</span><span class="p">([</span><span class="ss">:percent</span><span class="p">,</span><span class="w"> </span><span class="ss">:groups</span><span class="p">],</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×4 DataFrame</span>
<span class="go"> Row │ percent  groups  id      value </span>
<span class="go">     │ Float64  String  String  Int64 </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │     0.1  bb      AA          1</span>
<span class="go">   2 │     0.2  aa      AB          2</span>
<span class="go">   3 │     0.3  bb      AC          3</span>
<span class="go">   4 │     0.4  aa      AD          4</span>
<span class="go">   5 │     0.5  bb      AE          5</span>
<span class="go">   6 │     0.6  aa      AF          1</span>
<span class="go">   7 │     0.7  bb      AG          2</span>
<span class="go">   8 │     0.8  aa      AH          3</span>
<span class="go">   9 │     0.9  bb      AI          4</span>
<span class="go">  10 │     1.0  aa      AJ          5</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/relocate.jl#L42-L101' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@rename-Tuple{Any, Vararg{Any}}' href='#TidierDB.@rename-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@rename</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@rename</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">renamings</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Rename one or more columns in a SQL query.</p>
<p><strong>Arguments</strong></p>
<p>-<code>sql_query</code>: The SQL query to operate on. -<code>renamings</code>: One or more pairs of old and new column names, specified as new name = old name </p>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">       </span><span class="nd">@rename</span><span class="p">(</span><span class="n">new_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span>
<span class="w">       </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×4 DataFrame</span>
<span class="go"> Row │ id      groups  value  new_name </span>
<span class="go">     │ String  String  Int64  Float64  </span>
<span class="go">─────┼─────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1       0.1</span>
<span class="go">   2 │ AB      aa          2       0.2</span>
<span class="go">   3 │ AC      bb          3       0.3</span>
<span class="go">   4 │ AD      aa          4       0.4</span>
<span class="go">   5 │ AE      bb          5       0.5</span>
<span class="go">   6 │ AF      aa          1       0.6</span>
<span class="go">   7 │ AG      bb          2       0.7</span>
<span class="go">   8 │ AH      aa          3       0.8</span>
<span class="go">   9 │ AI      bb          4       0.9</span>
<span class="go">  10 │ AJ      aa          5       1.0</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L328-L366' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@right_join-Tuple{Any, Any, Vararg{Any}}' href='#TidierDB.@right_join-Tuple{Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@right_join</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@right_join</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">join_table</span><span class="p">,</span><span class="w"> </span><span class="n">orignal_table_col</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">new_table_col</span><span class="p">)</span>
</code></pre></div>
<p>Perform a right join between two SQL queries based on a specified condition.  Joins can be equi joins or inequality joins. For equi joins, the joining table  key column is dropped. Inequality joins can be made into AsOf or rolling joins  by wrapping the inequality in closest(key &gt;= key2). With inequality joins, the  columns from both tables are kept. Multiple joining criteria can be added, but  need to be separated by commas, ie <code>closest(key &gt;= key2), key3 == key3</code></p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The primary SQL query to operate on.</li>
<li><code>join_table::{SQLQuery, String}</code>: The secondary SQL table to join with the primary query table. Table that exist on the database already should be written as a string of the name</li>
<li><code>orignal_table_col</code>: Column from the original table that matches for join.  Accepts cols as bare column names or strings</li>
<li><code>new_table_col</code>: Column from the new table that matches for join.  Accepts columnss as bare column names or strings</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;AA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AC&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AG&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AI&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AK&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AM&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">92</span><span class="p">,</span><span class="w"> </span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">dfj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_join&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@right_join</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">dfj</span><span class="p">),</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">7×6 DataFrame</span>
<span class="go"> Row │ id      groups   value    percent    category  score </span>
<span class="go">     │ String  String?  Int64?   Float64?   String    Int64 </span>
<span class="go">─────┼──────────────────────────────────────────────────────</span>
<span class="go">   1 │ AA      bb             1        0.1  X            88</span>
<span class="go">   2 │ AC      bb             3        0.3  Y            92</span>
<span class="go">   3 │ AE      bb             5        0.5  X            77</span>
<span class="go">   4 │ AG      bb             2        0.7  Y            83</span>
<span class="go">   5 │ AI      bb             4        0.9  X            95</span>
<span class="go">   6 │ AK      missing  missing  missing    Y            68</span>
<span class="go">   7 │ AM      missing  missing  missing    X            74</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dfj</span><span class="w"> </span><span class="k">begin</span>
<span class="w">                  </span><span class="nd">@filter</span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">74</span><span class="p">)</span><span class="w"> </span><span class="c"># only show scores above 85 in joining table</span>
<span class="w">                </span><span class="k">end</span><span class="p">;</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@right_join</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">query</span><span class="p">),</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">6×6 DataFrame</span>
<span class="go"> Row │ id      groups   value    percent    category  score </span>
<span class="go">     │ String  String?  Int64?   Float64?   String    Int64 </span>
<span class="go">─────┼──────────────────────────────────────────────────────</span>
<span class="go">   1 │ AA      bb             1        0.1  X            88</span>
<span class="go">   2 │ AC      bb             3        0.3  Y            92</span>
<span class="go">   3 │ AE      bb             5        0.5  X            77</span>
<span class="go">   4 │ AG      bb             2        0.7  Y            83</span>
<span class="go">   5 │ AI      bb             4        0.9  X            95</span>
<span class="go">   6 │ AM      missing  missing  missing    X            74</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/joins_sq.jl#L362-L429' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@select-Tuple{Any, Vararg{Any}}' href='#TidierDB.@select-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@select</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@select</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="p">)</span>
</code></pre></div>
<p>Select specified columns from a SQL table.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: the SQL query to select columns from.</li>
<li><code>columns</code>: Expressions specifying the columns to select. Columns can be specified by        - name, <code>table.name</code>       - selectors - <code>starts_with()</code>        - ranges - <code>col1:col5</code>       - excluded with <code>!</code> notation</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df_mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df_mem</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@select</span><span class="p">(</span><span class="n">groups</span><span class="o">:</span><span class="n">percent</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×3 DataFrame</span>
<span class="go"> Row │ groups  value  percent </span>
<span class="go">     │ String  Int64  Float64 </span>
<span class="go">─────┼────────────────────────</span>
<span class="go">   1 │ bb          1      0.1</span>
<span class="go">   2 │ aa          2      0.2</span>
<span class="go">   3 │ bb          3      0.3</span>
<span class="go">   4 │ aa          4      0.4</span>
<span class="go">   5 │ bb          5      0.5</span>
<span class="go">   6 │ aa          1      0.6</span>
<span class="go">   7 │ bb          2      0.7</span>
<span class="go">   8 │ aa          3      0.8</span>
<span class="go">   9 │ bb          4      0.9</span>
<span class="go">  10 │ aa          5      1.0</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df_mem</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@select</span><span class="p">(</span><span class="n">contains</span><span class="p">(</span><span class="s">&quot;e&quot;</span><span class="p">))</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×2 DataFrame</span>
<span class="go"> Row │ value  percent </span>
<span class="go">     │ Int64  Float64 </span>
<span class="go">─────┼────────────────</span>
<span class="go">   1 │     1      0.1</span>
<span class="go">   2 │     2      0.2</span>
<span class="go">   3 │     3      0.3</span>
<span class="go">   4 │     4      0.4</span>
<span class="go">   5 │     5      0.5</span>
<span class="go">   6 │     1      0.6</span>
<span class="go">   7 │     2      0.7</span>
<span class="go">   8 │     3      0.8</span>
<span class="go">   9 │     4      0.9</span>
<span class="go">  10 │     5      1.0</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/TidierDB_macros.jl#L1-L64' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@semi_join-Tuple{Any, Any, Vararg{Any}}' href='#TidierDB.@semi_join-Tuple{Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@semi_join</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@semi_join</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">join_table</span><span class="p">,</span><span class="w"> </span><span class="n">orignal_table_col</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">new_table_col</span><span class="p">)</span>
</code></pre></div>
<p>Perform an semi join between two SQL queries based on a specified condition.  Joins can be equi joins or inequality joins. For equi joins, the joining table  key column is dropped. Inequality joins can be made into AsOf or rolling joins  by wrapping the inequality in closest(key &gt;= key2). With inequality joins, the  columns from both tables are kept. Multiple joining criteria can be added, but  need to be separated by commas, ie <code>closest(key &gt;= key2), key3 == key3</code></p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The primary SQL query to operate on.</li>
<li><code>join_table::{SQLQuery, String}</code>: The secondary SQL table to join with the primary query table. Table that exist on the database already should be written as a string of the name</li>
<li><code>orignal_table_col</code>: Column from the original table that matches for join.  Accepts cols as bare column names or strings</li>
<li><code>new_table_col</code>: Column from the new table that matches for join.  Accepts cols as bare column names or strings</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;AA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AC&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AG&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AI&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AK&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AM&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;X&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">92</span><span class="p">,</span><span class="w"> </span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">dfj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_join&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@semi_join</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">dfj</span><span class="p">),</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">5×4 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent </span>
<span class="go">     │ String  String  Int64  Float64 </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1      0.1</span>
<span class="go">   2 │ AC      bb          3      0.3</span>
<span class="go">   3 │ AE      bb          5      0.5</span>
<span class="go">   4 │ AG      bb          2      0.7</span>
<span class="go">   5 │ AI      bb          4      0.9</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/joins_sq.jl#L482-L527' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@separate-NTuple{4, Any}' href='#TidierDB.@separate-NTuple{4, Any}'>#</a>
<strong><code>TidierDB.@separate</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nd">@separate</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">from_col</span><span class="p">,</span><span class="w"> </span><span class="n">into_cols</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="p">)</span>
</code></pre></div>
<p>Separate a string column into mulitiple new columns based on a specified delimter </p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query</li>
<li><code>from_col</code>: Column that will be split</li>
<li><code>into_cols</code>: New column names, supports [] or ()</li>
<li><code>sep</code>: the string or character on which to split</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;1-1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2-2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3-3-3&quot;</span><span class="p">]);</span><span class="w"> </span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@separate</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">],</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@collect</span>
<span class="go">3×3 DataFrame</span>
<span class="go"> Row │ b       c       d       </span>
<span class="go">     │ String  String  String? </span>
<span class="go">─────┼─────────────────────────</span>
<span class="go">   1 │ 1       1       missing </span>
<span class="go">   2 │ 2       2       missing </span>
<span class="go">   3 │ 3       3       3</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@separate</span><span class="p">(</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">],</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@collect</span>
<span class="go">3×2 DataFrame</span>
<span class="go"> Row │ c       d      </span>
<span class="go">     │ String  String </span>
<span class="go">─────┼────────────────</span>
<span class="go">   1 │ 1       1</span>
<span class="go">   2 │ 2       2</span>
<span class="go">   3 │ 3       3-3</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/sep_unite.jl#L32-L67' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@setdiff-Tuple{Any, Any, Vararg{Any}}' href='#TidierDB.@setdiff-Tuple{Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@setdiff</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@setdiff</span><span class="p">(</span><span class="n">sql_query1</span><span class="p">,</span><span class="w"> </span><span class="n">sql_query2</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
</code></pre></div>
<p>Combine two SQL queries/tables using <code>EXECPT</code></p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query1</code>: The first SQL query to combine.</li>
<li><code>sql_query2</code>: The second SQL query to combine.</li>
<li><code>all</code>: Defaults to false, when true it will return duplicates. <code>EXCEPT ALL</code></li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>A lazy query of all rows in the second query bound to the first</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">],</span>
<span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Charlie&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;David&quot;</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">],</span>
<span class="w">       </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Charlie&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Eve&quot;</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df1&quot;</span><span class="p">);</span><span class="w"> </span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df2&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="nd">@setdiff</span><span class="p">(</span><span class="n">df2_table</span><span class="p">)</span><span class="w"> </span><span class="nd">@collect</span>
<span class="go">2×2 DataFrame</span>
<span class="go"> Row │ id     name   </span>
<span class="go">     │ Int64  String </span>
<span class="go">─────┼───────────────</span>
<span class="go">   1 │     1  Alice</span>
<span class="go">   2 │     4  David</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="nd">@setdiff</span><span class="p">(</span><span class="n">df2_table</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="nd">@collect</span>
<span class="go">3×2 DataFrame</span>
<span class="go"> Row │ id     name   </span>
<span class="go">     │ Int64  String </span>
<span class="go">─────┼───────────────</span>
<span class="go">   1 │     1  Alice</span>
<span class="go">   2 │     1  Alice</span>
<span class="go">   3 │     4  David</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/union_intersect_setdiff.jl#L158-L202' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@slice_max' href='#TidierDB.@slice_max'>#</a>
<strong><code>TidierDB.@slice_max</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@slice_max</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p>Select rows with the largest values in specified column. This will always return ties. </p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The SQL query to operate on.</li>
<li><code>column</code>: Column to identify the smallest values.</li>
<li><code>n</code>: The number of rows to select with the largest values for each specified column. Default is 1, which selects the row with the smallest value.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@slice_max</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">4×5 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  rank_col </span>
<span class="go">     │ String  String  Int64  Float64  Int64    </span>
<span class="go">─────┼──────────────────────────────────────────</span>
<span class="go">   1 │ AJ      aa          5      1.0         1</span>
<span class="go">   2 │ AD      aa          4      0.4         2</span>
<span class="go">   3 │ AE      bb          5      0.5         1</span>
<span class="go">   4 │ AI      bb          4      0.9         2</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@slice_max</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×5 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  rank_col </span>
<span class="go">     │ String  String  Int64  Float64  Int64    </span>
<span class="go">─────┼──────────────────────────────────────────</span>
<span class="go">   1 │ AE      bb          5      0.5         1</span>
<span class="go">   2 │ AJ      aa          5      1.0         1</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="nd">@filter</span><span class="p">(</span><span class="n">percent</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">.9</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@slice_max</span><span class="p">(</span><span class="n">percent</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">1×5 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  rank_col </span>
<span class="go">     │ String  String  Int64  Float64  Int64    </span>
<span class="go">─────┼──────────────────────────────────────────</span>
<span class="go">   1 │ AH      aa          3      0.8         1</span>

<span class="gp">julia&gt;</span><span class="w">  </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="w"> </span><span class="n">groups</span>
<span class="w">         </span><span class="nd">@slice_max</span><span class="p">(</span><span class="n">percent</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="w"> </span><span class="n">groups</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×5 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  rank_col </span>
<span class="go">     │ String  String  Int64  Float64  Int64    </span>
<span class="go">─────┼──────────────────────────────────────────</span>
<span class="go">   1 │ AJ      aa          5      1.0         1</span>
<span class="go">   2 │ AI      bb          4      0.9         1</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@summarize</span><span class="p">(</span><span class="n">percent_mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">percent</span><span class="p">),</span><span class="w"> </span><span class="n">_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@slice_max</span><span class="p">(</span><span class="n">percent_mean</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">1×3 DataFrame</span>
<span class="go"> Row │ groups  percent_mean  rank_col </span>
<span class="go">     │ String  Float64       Int64    </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ aa               0.6         1</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/slices_sq.jl#L76-L157' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@slice_min' href='#TidierDB.@slice_min'>#</a>
<strong><code>TidierDB.@slice_min</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@slice_min</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p>Select rows with the smallest values in specified column. This will always return ties. </p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The SQL query to operate on.</li>
<li><code>column</code>: Column to identify the smallest values.</li>
<li><code>n</code>: The number of rows to select with the smallest values for each specified column. Default is 1, which selects the row with the smallest value.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@slice_min</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="c"># arranged due to duckdb multi threading</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">4×5 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  rank_col </span>
<span class="go">     │ String  String  Int64  Float64  Int64    </span>
<span class="go">─────┼──────────────────────────────────────────</span>
<span class="go">   1 │ AB      aa          2      0.2         2</span>
<span class="go">   2 │ AF      aa          1      0.6         1</span>
<span class="go">   3 │ AA      bb          1      0.1         1</span>
<span class="go">   4 │ AG      bb          2      0.7         2</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@slice_min</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×5 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  rank_col </span>
<span class="go">     │ String  String  Int64  Float64  Int64    </span>
<span class="go">─────┼──────────────────────────────────────────</span>
<span class="go">   1 │ AA      bb          1      0.1         1</span>
<span class="go">   2 │ AF      aa          1      0.6         1</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@filter</span><span class="p">(</span><span class="n">percent</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">.1</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@slice_min</span><span class="p">(</span><span class="n">percent</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">1×5 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  rank_col </span>
<span class="go">     │ String  String  Int64  Float64  Int64    </span>
<span class="go">─────┼──────────────────────────────────────────</span>
<span class="go">   1 │ AB      aa          2      0.2         1</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="w"> </span><span class="n">groups</span>
<span class="w">         </span><span class="nd">@slice_min</span><span class="p">(</span><span class="n">percent</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="w"> </span><span class="n">groups</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×5 DataFrame</span>
<span class="go"> Row │ id      groups  value  percent  rank_col </span>
<span class="go">     │ String  String  Int64  Float64  Int64    </span>
<span class="go">─────┼──────────────────────────────────────────</span>
<span class="go">   1 │ AB      aa          2      0.2         1</span>
<span class="go">   2 │ AA      bb          1      0.1         1</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@summarize</span><span class="p">(</span><span class="n">percent_mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">percent</span><span class="p">),</span><span class="w"> </span><span class="n">_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@slice_min</span><span class="p">(</span><span class="n">percent_mean</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">1×3 DataFrame</span>
<span class="go"> Row │ groups  percent_mean  rank_col </span>
<span class="go">     │ String  Float64       Int64    </span>
<span class="go">─────┼────────────────────────────────</span>
<span class="go">   1 │ bb               0.5         1</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/slices_sq.jl#L1-L82' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@slice_sample' href='#TidierDB.@slice_sample'>#</a>
<strong><code>TidierDB.@slice_sample</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@slice_sample</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
</code></pre></div>
<p>Randomly select a specified number of rows from a SQL table.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The SQL query to sample</li>
<li><code>n</code>: The number of rows to randomly select.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@slice_sample</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">       </span><span class="nd">@slice_sample</span><span class="p">()</span>
<span class="w">       </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/slices_sq.jl#L153-L182' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@summarise-Tuple{Any, Vararg{Any}}' href='#TidierDB.@summarise-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@summarise</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nd">@summarise</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">exprs</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Aggregate and summarize specified columns of a SQL table.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: query to be summarized</li>
<li><code>exprs</code>: Expressions defining the aggregation and summarization operations.    These can specify simple aggregations like mean, sum, and count, ' or more complex expressions    involving existing column values. <code>@summarize</code>  supports all SQL database aggregate functions   as long as they are written with matching syntax</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@summarise</span><span class="p">(</span><span class="n">across</span><span class="p">((</span><span class="n">value</span><span class="o">:</span><span class="n">percent</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">mean</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">)))</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×5 DataFrame</span>
<span class="go"> Row │ groups  value_mean  percent_mean  value_sum  percent_sum </span>
<span class="go">     │ String  Float64     Float64       Int128     Float64     </span>
<span class="go">─────┼──────────────────────────────────────────────────────────</span>
<span class="go">   1 │ aa             3.0           0.6         15          3.0</span>
<span class="go">   2 │ bb             3.0           0.5         15          2.5</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@summarise</span><span class="p">(</span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">percent</span><span class="p">),</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">())</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×3 DataFrame</span>
<span class="go"> Row │ groups  test     n     </span>
<span class="go">     │ String  Float64  Int64 </span>
<span class="go">─────┼────────────────────────</span>
<span class="go">   1 │ aa          3.0      5</span>
<span class="go">   2 │ bb          2.5      5</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/mutate_and_summ.jl#L371-L421' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@summarize-Tuple{Any, Vararg{Any}}' href='#TidierDB.@summarize-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@summarize</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nd">@summarize</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">exprs</span><span class="o">...</span><span class="p">;</span><span class="w"> </span><span class="n">_by</span><span class="p">)</span>
</code></pre></div>
<p>Aggregate and summarize specified columns of a SQL table.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The SQL query to summarize</li>
<li><code>exprs</code>: Expressions defining the aggregation and summarization operations. These can specify simple aggregations like mean, sum, and count, or more complex expressions involving existing column values.</li>
<li><code>_by</code>: optional argument that supports single column names, or vectors of columns to allow for grouping for the aggregatation in the macro call</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@summarise</span><span class="p">(</span><span class="n">across</span><span class="p">((</span><span class="n">ends_with</span><span class="p">(</span><span class="s">&quot;e&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">starts_with</span><span class="p">(</span><span class="s">&quot;p&quot;</span><span class="p">)),</span><span class="w"> </span><span class="p">(</span><span class="n">mean</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">)))</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×5 DataFrame</span>
<span class="go"> Row │ groups  value_mean  percent_mean  value_sum  percent_sum </span>
<span class="go">     │ String  Float64     Float64       Int128     Float64     </span>
<span class="go">─────┼──────────────────────────────────────────────────────────</span>
<span class="go">   1 │ aa             3.0           0.6         15          3.0</span>
<span class="go">   2 │ bb             3.0           0.5         15          2.5</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@group_by</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@summarise</span><span class="p">(</span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">percent</span><span class="p">),</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">())</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×3 DataFrame</span>
<span class="go"> Row │ groups  test     n     </span>
<span class="go">     │ String  Float64  Int64 </span>
<span class="go">─────┼────────────────────────</span>
<span class="go">   1 │ aa          3.0      5</span>
<span class="go">   2 │ bb          2.5      5</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">                </span><span class="nd">@summarise</span><span class="p">(</span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">percent</span><span class="p">),</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">(),</span><span class="w"> </span><span class="n">_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groups</span><span class="p">)</span>
<span class="w">                </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">                </span><span class="nd">@collect</span>
<span class="w">              </span><span class="k">end</span>
<span class="go">2×3 DataFrame</span>
<span class="go"> Row │ groups  test     n     </span>
<span class="go">     │ String  Float64  Int64 </span>
<span class="go">─────┼────────────────────────</span>
<span class="go">   1 │ aa          3.0      5</span>
<span class="go">   2 │ bb          2.5      5</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/mutate_and_summ.jl#L286-L343' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@transmute-Tuple{Any, Vararg{Any}}' href='#TidierDB.@transmute-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@transmute</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@transmute</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">exprs</span><span class="o">...</span><span class="p">;</span><span class="w"> </span><span class="n">_by</span><span class="p">,</span><span class="w"> </span><span class="n">_frame</span><span class="p">,</span><span class="w"> </span><span class="n">_order</span><span class="p">)</span>
</code></pre></div>
<p>Transmute SQL table by adding new columns or modifying existing ones. Unlike <code>@mutate</code>, <code>@transmute</code> only keep columns on the left hand side of the <code>=</code>  in transmute or grouping.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query::SQLQuery</code>: The SQL query to operate on.</li>
<li><code>exprs</code>: Expressions for mutating the table. New columns can be added or existing columns modified using <code>column_name = expression syntax</code>, where expression can involve existing columns.</li>
<li><code>_by</code>: optional argument that supports single column names, or vectors of columns to allow for grouping for the transformation in the macro call</li>
<li><code>_frame</code>: optional argument that allows window frames to be determined within <code>@mutate</code>. supports single digits or tuples of numbers. supports <code>desc()</code> prefix</li>
<li><code>_order</code>: optional argument that allows window orders to be determined within <code>@mutate</code>. supports single columns or vectors of names</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@transmute</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">new_col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">percent</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×2 DataFrame</span>
<span class="go"> Row │ value  new_col </span>
<span class="go">     │ Int64  Float64 </span>
<span class="go">─────┼────────────────</span>
<span class="go">   1 │     4     0.01</span>
<span class="go">   2 │     8     0.04</span>
<span class="go">   3 │    12     0.09</span>
<span class="go">   4 │    16     0.16</span>
<span class="go">   5 │    20     0.25</span>
<span class="go">   6 │     4     0.36</span>
<span class="go">   7 │     8     0.49</span>
<span class="go">   8 │    12     0.64</span>
<span class="go">   9 │    16     0.81</span>
<span class="go">  10 │    20     1.0</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@transmute</span><span class="p">(</span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">maximum</span><span class="p">(</span><span class="n">value</span><span class="p">),</span><span class="w"> </span><span class="n">_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×2 DataFrame</span>
<span class="go"> Row │ groups  max   </span>
<span class="go">     │ String  Int64 </span>
<span class="go">─────┼───────────────</span>
<span class="go">   1 │ aa          5</span>
<span class="go">   2 │ aa          5</span>
<span class="go">   3 │ aa          5</span>
<span class="go">   4 │ aa          5</span>
<span class="go">   5 │ aa          5</span>
<span class="go">   6 │ bb          5</span>
<span class="go">   7 │ bb          5</span>
<span class="go">   8 │ bb          5</span>
<span class="go">   9 │ bb          5</span>
<span class="go">  10 │ bb          5</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/mutate_and_summ.jl#L378-L437' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@union-Tuple{Any, Any, Vararg{Any}}' href='#TidierDB.@union-Tuple{Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@union</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@union</span><span class="p">(</span><span class="n">sql_query1</span><span class="p">,</span><span class="w"> </span><span class="n">sql_query2</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
</code></pre></div>
<p>Combine two SQL queries using the <code>UNION</code> operator.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query1</code>: The first SQL query to combine.</li>
<li><code>sql_query2</code>: The second SQL query to combine.</li>
<li><code>all</code>: Defaults to false, when true it will will return duplicates. <code>UNION ALL</code></li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>A lazy query of all distinct rows in the second query bound to the first</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">],</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df1&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df2_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df2&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="nd">@union</span><span class="p">(</span><span class="n">df2_table</span><span class="p">)</span><span class="w"> </span><span class="nd">@collect</span>
<span class="go">6×2 DataFrame</span>
<span class="go"> Row │ id     value </span>
<span class="go">     │ Int64  Int64 </span>
<span class="go">─────┼──────────────</span>
<span class="go">   1 │     1     10</span>
<span class="go">   2 │     2     20</span>
<span class="go">   3 │     3     30</span>
<span class="go">   4 │     4     40</span>
<span class="go">   5 │     5     50</span>
<span class="go">   6 │     6     60</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@union</span><span class="p">(</span><span class="s">&quot;df1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">3×2 DataFrame</span>
<span class="go"> Row │ id     value </span>
<span class="go">     │ Int64  Int64 </span>
<span class="go">─────┼──────────────</span>
<span class="go">   1 │     1     10</span>
<span class="go">   2 │     2     20</span>
<span class="go">   3 │     3     30</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@union</span><span class="p">(</span><span class="s">&quot;df1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">6×2 DataFrame</span>
<span class="go"> Row │ id     value </span>
<span class="go">     │ Int64  Int64 </span>
<span class="go">─────┼──────────────</span>
<span class="go">   1 │     1     10</span>
<span class="go">   2 │     2     20</span>
<span class="go">   3 │     3     30</span>
<span class="go">   4 │     1     10</span>
<span class="go">   5 │     2     20</span>
<span class="go">   6 │     3     30</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df2_table</span><span class="w"> </span><span class="nd">@filter</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">50</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@filter</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@union</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">query</span><span class="p">))</span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">3×2 DataFrame</span>
<span class="go"> Row │ id     value </span>
<span class="go">     │ Int64  Int64 </span>
<span class="go">─────┼──────────────</span>
<span class="go">   1 │     7     20</span>
<span class="go">   2 │     8     30</span>
<span class="go">   3 │     5     50</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/union_intersect_setdiff.jl#L82-L162' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@union_all-Tuple{Any, Any}' href='#TidierDB.@union_all-Tuple{Any, Any}'>#</a>
<strong><code>TidierDB.@union_all</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@union</span><span class="p">(</span><span class="n">sql_query1</span><span class="p">,</span><span class="w"> </span><span class="n">sql_query2</span><span class="p">)</span>
</code></pre></div>
<p>Combine two SQL queries using the <code>UNION ALL</code> operator.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query1</code>: The first SQL query to combine.</li>
<li><code>sql_query2</code>: The second SQL query to combine.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>A lazy query of all rows in the second query bound to the first</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df1&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df1_table</span><span class="w"> </span><span class="nd">@union_all</span><span class="p">(</span><span class="n">df1_table</span><span class="p">)</span><span class="w"> </span><span class="nd">@collect</span>
<span class="go">6×2 DataFrame</span>
<span class="go"> Row │ id     value </span>
<span class="go">     │ Int64  Int64 </span>
<span class="go">─────┼──────────────</span>
<span class="go">   1 │     1     10</span>
<span class="go">   2 │     2     20</span>
<span class="go">   3 │     3     30</span>
<span class="go">   4 │     1     10</span>
<span class="go">   5 │     2     20</span>
<span class="go">   6 │     3     30</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/union_intersect_setdiff.jl#L110-L142' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@unite-Tuple{Any, Any, Any, Any, Vararg{Any}}' href='#TidierDB.@unite-Tuple{Any, Any, Any, Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@unite</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nd">@unite</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">new_cols</span><span class="p">,</span><span class="w"> </span><span class="n">from_cols</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="p">,</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span>
</code></pre></div>
<p>Separate a multiple columns into one new columns using a specific delimter</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query</li>
<li><code>new_col</code>: New column that will recieve the combination</li>
<li><code>from_cols</code>: Column names that it will combine, supports [] or ()</li>
<li><code>sep</code>: the string or character that will separate the values in the new column</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nb">missing</span><span class="p">,</span><span class="w"> </span><span class="nb">missing</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p">]);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@unite</span><span class="p">(</span><span class="n">new_col</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@collect</span>
<span class="go">3×1 DataFrame</span>
<span class="go"> Row │ new_col </span>
<span class="go">     │ String  </span>
<span class="go">─────┼─────────</span>
<span class="go">   1 │ 1-1</span>
<span class="go">   2 │ 2-2</span>
<span class="go">   3 │ 3-3-3</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/sep_unite.jl#L93-L119' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@unnest_longer-Tuple{Any, Vararg{Any}}' href='#TidierDB.@unnest_longer-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@unnest_longer</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@unnest_longer</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Unnests specified columns into longer format. This function takes multiple columns containing arrays or other nested structures and expands them into a longer format, where each element of the arrays becomes a separate row.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query</li>
<li><code>columns...</code>: One or more columns containing arrays or other nested structures to be unnested.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">DuckDB</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span>
<span class="w">      </span><span class="s">      CREATE TABLE nt (</span>
<span class="w">      </span><span class="s">          id INTEGER,</span>
<span class="w">      </span><span class="s">          data ROW(a INTEGER[], b INTEGER[])</span>
<span class="w">      </span><span class="s">          );</span>
<span class="w">      </span><span class="s">      INSERT INTO nt VALUES</span>
<span class="w">      </span><span class="s">          (1, (ARRAY[1,2], ARRAY[3,4])),</span>
<span class="w">      </span><span class="s">          (2, (ARRAY[5,6], ARRAY[7,8,9])),</span>
<span class="w">      </span><span class="s">          (3, (ARRAY[10,11], ARRAY[12,13]));&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="ss">:nt</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@unnest_wider</span><span class="w"> </span><span class="n">data</span><span class="w">  </span>
<span class="w">        </span><span class="nd">@unnest_longer</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">7×3 DataFrame</span>
<span class="go"> Row │ id     a        b     </span>
<span class="go">     │ Int32  Int32?   Int32 </span>
<span class="go">─────┼───────────────────────</span>
<span class="go">   1 │     1        1      3</span>
<span class="go">   2 │     1        2      4</span>
<span class="go">   3 │     2        5      7</span>
<span class="go">   4 │     2        6      8</span>
<span class="go">   5 │     2  missing      9</span>
<span class="go">   6 │     3       10     12</span>
<span class="go">   7 │     3       11     13</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="ss">:nt</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@unnest_wider</span><span class="w"> </span><span class="n">data</span><span class="w">  </span>
<span class="w">        </span><span class="nd">@unnest_longer</span><span class="w"> </span><span class="n">a</span><span class="o">:</span><span class="n">b</span><span class="w"> </span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">7×3 DataFrame</span>
<span class="go"> Row │ id     a        b     </span>
<span class="go">     │ Int32  Int32?   Int32 </span>
<span class="go">─────┼───────────────────────</span>
<span class="go">   1 │     1        1      3</span>
<span class="go">   2 │     1        2      4</span>
<span class="go">   3 │     2        5      7</span>
<span class="go">   4 │     2        6      8</span>
<span class="go">   5 │     2  missing      9</span>
<span class="go">   6 │     3       10     12</span>
<span class="go">   7 │     3       11     13</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/unnest.jl#L89-L146' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@unnest_wider-Tuple{Any, Vararg{Any}}' href='#TidierDB.@unnest_wider-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@unnest_wider</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@unnest_wider</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="p">)</span>
</code></pre></div>
<p>Unnests a nested column into wider format. This function takes a column containing nested structures (e.g., rows or arrays) and expands it into separate columns.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query</li>
<li><code>column</code>: The column containing nested structures to be unnested.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">DuckDB</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span>
<span class="w">      </span><span class="s">  CREATE TABLE df3 (</span>
<span class="w">      </span><span class="s">      id INTEGER,</span>
<span class="w">      </span><span class="s">      pos ROW(lat DOUBLE, lon DOUBLE)</span>
<span class="w">      </span><span class="s">  );</span>
<span class="w">      </span><span class="s">  INSERT INTO df3 VALUES</span>
<span class="w">      </span><span class="s">      (1, ROW(10.1, 30.3)),</span>
<span class="w">      </span><span class="s">      (2, ROW(10.2, 30.2)),</span>
<span class="w">      </span><span class="s">      (3, ROW(10.3, 30.1));&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="ss">:df3</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">            </span><span class="nd">@unnest_wider</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">3×3 DataFrame</span>
<span class="go"> Row │ id     lat      lon     </span>
<span class="go">     │ Int32  Float64  Float64 </span>
<span class="go">─────┼─────────────────────────</span>
<span class="go">   1 │     1     10.1     30.3</span>
<span class="go">   2 │     2     10.2     30.2</span>
<span class="go">   3 │     3     10.3     30.1 </span>
<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="ss">:df3</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">            </span><span class="nd">@unnest_wider</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">names_sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;_&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">3×3 DataFrame</span>
<span class="go"> Row │ id     pos_lat  pos_lon </span>
<span class="go">     │ Int32  Float64  Float64 </span>
<span class="go">─────┼─────────────────────────</span>
<span class="go">   1 │     1     10.1     30.3</span>
<span class="go">   2 │     2     10.2     30.2</span>
<span class="go">   3 │     3     10.3     30.1</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/unnest.jl#L32-L78' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@window_frame-Tuple{Any, Vararg{Any}}' href='#TidierDB.@window_frame-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@window_frame</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@window_frame</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Define the window frame for window functions in a SQL query, specifying the range of rows to include in the calculation relative to the current row.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sqlquery::SQLQuery</code>: The SQLQuery instance to which the window frame will be applied.</li>
<li>
<p><code>args...</code>: A variable number of arguments specifying the frame boundaries. These can be:</p>
<ul>
<li><code>from</code>: The starting point of the frame. Can be a positive or negative integer, 0 or empty. When empty, it will use UNBOUNDED</li>
<li><code>to</code>: The ending point of the frame. Can be a positive or negative integer,  0 or empty. When empty, it will use UNBOUNDED</li>
<li>if only one integer is provided without specifying <code>to</code> or <code>from</code> it will default to from, and to will be UNBOUNDED.</li>
<li>if no arguments are given, both will be UNBOUNDED</li>
</ul>
</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df_mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df_mem</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="nd">@group_by</span><span class="w"> </span><span class="n">groups</span>
<span class="w">        </span><span class="nd">@window_frame</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">avg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">percent</span><span class="p">))</span>
<span class="w">        </span><span class="c">#@show_query</span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df_mem</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="nd">@group_by</span><span class="w"> </span><span class="n">groups</span>
<span class="w">        </span><span class="nd">@window_frame</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">avg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">percent</span><span class="p">))</span>
<span class="w">        </span><span class="c">#@show_query</span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df_mem</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="nd">@group_by</span><span class="w"> </span><span class="n">groups</span>
<span class="w">        </span><span class="nd">@window_frame</span><span class="p">(</span><span class="n">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">avg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">percent</span><span class="p">))</span>
<span class="w">        </span><span class="c">#@show_query</span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">df_mem</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="nd">@group_by</span><span class="w"> </span><span class="n">groups</span>
<span class="w">        </span><span class="nd">@window_frame</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">avg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">percent</span><span class="p">))</span>
<span class="w">        </span><span class="c">#@show_query</span>
<span class="w">        </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/windows.jl#L58-L112' class='documenter-source'>source</a><br></p>
<p><a id='TidierDB.@window_order-Tuple{Any, Vararg{Any}}' href='#TidierDB.@window_order-Tuple{Any, Vararg{Any}}'>#</a>
<strong><code>TidierDB.@window_order</code></strong> &mdash; <em>Macro</em>.</p>
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nd">@window_order</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Specify the order of rows for window functions within a SQL query.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>sql_query</code>: The SQL query to operate on.</li>
<li><code>columns</code>: Columns to order the rows by for the window function. Can include multiple columns for nested sorting. Prepend a column name with - for descending order.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span>
<span class="w">                        </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>


<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_view&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="nd">@group_by</span><span class="w"> </span><span class="n">groups</span>
<span class="w">        </span><span class="nd">@window_frame</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@window_order</span><span class="p">(</span><span class="n">desc</span><span class="p">(</span><span class="n">percent</span><span class="p">))</span>
<span class="w">        </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">avg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
<span class="w">       </span><span class="c">#@show_query </span>
<span class="w">       </span><span class="k">end</span><span class="p">;</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/windows.jl#L1-L27' class='documenter-source'>source</a><br></p>
<p><a id='Reference-Internal-functions'></a></p>
<p><a id='Reference-Internal-functions-1'></a></p>
<h2 id="reference-internal-functions">Reference - Internal functions<a class="headerlink" href="#reference-internal-functions" title="Permanent link">¤</a></h2>
<p><a id='TidierDB.aggregate_and_window_functions-Tuple{}' href='#TidierDB.aggregate_and_window_functions-Tuple{}'>#</a>
<strong><code>TidierDB.aggregate_and_window_functions</code></strong> &mdash; <em>Method</em>.</p>
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="n">Aggregate</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">Window</span><span class="w"> </span><span class="n">Functions</span>
</code></pre></div>
<p>Nearly all aggregate functions from any database are supported both <code>@summarize</code> and <code>@mutate</code>. </p>
<p>With <code>@summarize</code>, an aggregate functions available on a SQL backend can be used as they are in sql with the same syntax (<code>'</code> should be replaced with <code>"</code>)</p>
<p><code>@mutate</code> supports them as well, however, unless listed below, the function call must be wrapped with <code>agg()</code></p>
<ul>
<li>Aggregate Functions: <code>maximum</code>, <code>minimum</code>, <code>mean</code>, <code>std</code>, <code>sum</code>, <code>cumsum</code></li>
<li>Window Functions: <code>lead</code>, <code>lag</code>, <code>dense_rank</code>, <code>nth_value</code>, <code>ntile</code>, <code>rank_dense</code>, <code>row_number</code>, <code>first_value</code>, <code>last_value</code>, <code>cume_dist</code></li>
</ul>
<p>If a function is needed regularly, instead of wrapping it in <code>agg</code>, it can also be added to <code>window_agg_fxns</code> with <code>push!</code> as demonstrated below</p>
<p>The list of DuckDB aggregate functions and their syntax can be found <a href="https://duckdb.org/docs/sql/functions/aggregates.html#general-aggregate-functions">here</a> Please refer to your backend documentation for a complete list with syntac, but open an issue on TidierDB if your run into roadblocks.  </p>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">julia&gt;</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">],</span><span class="w"> </span>
<span class="w">                </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;aa&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;bb&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                </span><span class="n">value1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="o">^</span><span class="mi">1</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">-</span><span class="mf">4.5</span><span class="o">:</span><span class="mf">4.5</span><span class="p">],</span><span class="w"> </span>
<span class="w">                </span><span class="n">value2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="n">i</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">],</span><span class="w"> </span>
<span class="w">                </span><span class="n">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connect</span><span class="p">(</span><span class="n">duckdb</span><span class="p">());</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_agg&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@summarise</span><span class="p">(</span>
<span class="w">             </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">regr_r2</span><span class="p">(</span><span class="n">value2</span><span class="p">,</span><span class="w"> </span><span class="n">value1</span><span class="p">),</span>
<span class="w">             </span><span class="n">across</span><span class="p">(</span><span class="n">contains</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">median</span><span class="p">),</span><span class="w"> </span>
<span class="w">             </span><span class="n">_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">2×4 DataFrame</span>
<span class="go"> Row │ groups  r2        value1_median  value2_median </span>
<span class="go">     │ String  Float64   Float64        Float64       </span>
<span class="go">─────┼────────────────────────────────────────────────</span>
<span class="go">   1 │ aa      0.700161           -3.5           70.0</span>
<span class="go">   2 │ bb      0.703783           -4.5           37.0</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_agg&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@mutate</span><span class="p">(</span>
<span class="w">            </span><span class="n">slope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">agg</span><span class="p">(</span><span class="n">regr_slope</span><span class="p">(</span><span class="n">value1</span><span class="p">,</span><span class="w"> </span><span class="n">value2</span><span class="p">)),</span>
<span class="w">            </span><span class="n">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">agg</span><span class="p">(</span><span class="n">var_samp</span><span class="p">(</span><span class="n">value2</span><span class="p">)),</span>
<span class="w">            </span><span class="n">std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="p">(</span><span class="n">value2</span><span class="p">),</span><span class="w"> </span><span class="c"># since this is in the list above, it does not get wrapped in `agg`</span>
<span class="w">            </span><span class="n">_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groups</span>
<span class="w">         </span><span class="p">)</span>
<span class="w">         </span><span class="nd">@mutate</span><span class="p">(</span><span class="n">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
<span class="w">         </span><span class="nd">@select</span><span class="w"> </span><span class="o">!</span><span class="n">percent</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×7 DataFrame</span>
<span class="go"> Row │ id      groups  value1   value2  slope       var       std     </span>
<span class="go">     │ String  String  Float64  Int64   Float64     Float64   Float64 </span>
<span class="go">─────┼────────────────────────────────────────────────────────────────</span>
<span class="go">   1 │ AB      aa         -7.5       6  0.00608835  188885.0  434.609</span>
<span class="go">   2 │ AD      aa         -5.5      20  0.00608835  188885.0  434.609</span>
<span class="go">   3 │ AF      aa         -3.5      70  0.00608835  188885.0  434.609</span>
<span class="go">   4 │ AH      aa         -1.5     264  0.00608835  188885.0  434.609</span>
<span class="go">   5 │ AJ      aa          0.5    1034  0.00608835  188885.0  434.609</span>
<span class="go">   6 │ AA      bb         -8.5       3  0.0121342    47799.0  218.629</span>
<span class="go">   7 │ AC      bb         -6.5      11  0.0121342    47799.0  218.629</span>
<span class="go">   8 │ AE      bb         -4.5      37  0.0121342    47799.0  218.629</span>
<span class="go">   9 │ AG      bb         -2.5     135  0.0121342    47799.0  218.629</span>
<span class="go">  10 │ AI      bb         -0.5     521  0.0121342    47799.0  218.629</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="n">push!</span><span class="p">(</span><span class="n">TidierDB</span><span class="o">.</span><span class="n">window_agg_fxns</span><span class="p">,</span><span class="w"> </span><span class="ss">:regr_slope</span><span class="p">);</span>

<span class="gp">julia&gt;</span><span class="w"> </span><span class="nd">@chain</span><span class="w"> </span><span class="n">dt</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;df_agg&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">         </span><span class="nd">@mutate</span><span class="p">(</span>
<span class="w">            </span><span class="n">slope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">regr_slope</span><span class="p">(</span><span class="n">value1</span><span class="p">,</span><span class="w"> </span><span class="n">value2</span><span class="p">),</span><span class="w"> </span><span class="c"># no longer wrapped in `agg` following the above</span>
<span class="w">            </span><span class="n">_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groups</span>
<span class="w">         </span><span class="p">)</span>
<span class="w">         </span><span class="nd">@select</span><span class="w"> </span><span class="o">!</span><span class="n">percent</span>
<span class="w">         </span><span class="nd">@arrange</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
<span class="w">         </span><span class="nd">@collect</span>
<span class="w">       </span><span class="k">end</span>
<span class="go">10×5 DataFrame</span>
<span class="go"> Row │ id      groups  value1   value2  slope      </span>
<span class="go">     │ String  String  Float64  Int64   Float64    </span>
<span class="go">─────┼─────────────────────────────────────────────</span>
<span class="go">   1 │ AB      aa         -7.5       6  0.00608835</span>
<span class="go">   2 │ AD      aa         -5.5      20  0.00608835</span>
<span class="go">   3 │ AF      aa         -3.5      70  0.00608835</span>
<span class="go">   4 │ AH      aa         -1.5     264  0.00608835</span>
<span class="go">   5 │ AJ      aa          0.5    1034  0.00608835</span>
<span class="go">   6 │ AA      bb         -8.5       3  0.0121342</span>
<span class="go">   7 │ AC      bb         -6.5      11  0.0121342</span>
<span class="go">   8 │ AE      bb         -4.5      37  0.0121342</span>
<span class="go">   9 │ AG      bb         -2.5     135  0.0121342</span>
<span class="go">  10 │ AI      bb         -0.5     521  0.0121342</span>
</code></pre></div>
<p><a target='_blank' href='https://github.com/TidierOrg/TidierDB.jl/blob/53d36bcecd3297310e94c2606c292d0d0a25fce1/src/parsing_duckdb.jl#L189-L282' class='documenter-source'>source</a><br></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../examples/generated/UserGuide/misc_tips/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Misc Tips/Tricks">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Misc Tips/Tricks
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/kdpsingh" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/kdpsinghlab" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate", "navigation.top", "navigation.footer", "search.highlight", "search.share", "search.suggest", "toc.follow", "header.autohide"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>